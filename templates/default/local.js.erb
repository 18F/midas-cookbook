global.appPath = require('path').dirname(require.main.filename);

var fs = require('fs');

module.exports = {
  systemName: '<%= @app_id %>',
  httpProtocol: 'https',
  hostName: '<%= @app_host %>',
  port: process.env.PORT || 1337,
  environment: '<%= @app_environment %>',

  connections: {
    'default': 'postgresql',
    memory: {
      adapter: 'sails-disk',
      inMemory: true
    },
    disk: {
      adapter: 'sails-disk',
      filePath: './.tmp/',
      inMemory: false
    },
    postgresql: {
      adapter     : 'sails-postgresql',
      host        : '<%= @db_host %>',
      user        : '<%= @db_user %>',
      password    : '<%= @db_password %>',
      database    : '<%= @db_name %>',
      softDelete  : true
    }
  },

  emailTemplateDirectories: {
    templateDir: 'assets/email/templates',
    layoutDir: 'assets/email/layouts'
  },

  // Default task state
  taskState: '<%= @task_state %>',
  draftAdminOnly: <%= @draft_admin_only %>,

  emailProtocol: 'SMTP',
  smtp: {
    service             : '',
    host                : '<%= @email_host %>',
    secureConnection    : <%= @email_secure %>,
    port                : <%= @email_port %>,
    auth                : {
      user              : '<%= @email_user %>',
      pass              : '<%= @email_password %>'
    },
    ignoreTLS           : false,
    debug               : false,
    maxConnections      : 5
  },


  // System-wide email notification settings
  // Set as a comma-separated list of email addresses
  notificationsCC  : '<%= @email_cc %>',
  notificationsBCC : '<%= @email_bcc %>',

  ses: {
    // AWSAccessKeyID: 'AWSACCESSKEY',
    // AWSSecretKey: 'AWS/Secret/key',
    // ServiceUrl: 'https://email.us-east-1.amazonaws.com'
  },

  dkimEnabled: false,
  dkim: {
    // domainName: "kreata.ee",
    // keySelector: "dkim",
    // privateKey: fs.readFileSync("private_key.pem"),
    // headerFieldNames: ''
  },

  systemEmail: '<%= @app_system_email %>',

  newrelicEnabled: <%= @newrelic_enabled %>,
  newrelic: {
    // Array of application names, as they will appear in the New Relic interface.
    app_name : ['<%= @newrelic_appname %>'],
    // Your New Relic license key.
    license_key : '<%= @newrelic_licensekey %>',
    logging : {
      level : '<%= @newrelic_loglevel %>'
    }
  }

};
