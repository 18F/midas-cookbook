var fs = require('fs');

module.exports = {
  systemName: '<%= @app_id %>',
  httpProtocol: 'https',
  hostName: '<%= @app_host %>',
  port: process.env.PORT || 1337,

  connections: {
    'default': 'postgresql',
    memory: {
      adapter: 'sails-disk',
      inMemory: true
    },
    disk: {
      adapter: 'sails-disk',
      filePath: './.tmp/',
      inMemory: false
    },
    postgresql: {
      adapter     : 'sails-postgresql',
      host        : '<%= @db_host %>',
      user        : '<%= @db_user %>',
      password    : '<%= @db_password %>',
      database    : '<%= @db_name %>',
      softDelete  : true
    }
  },

  // Default task state
  taskState: '<%= @task_state %>',
  draftAdminOnly: <%= @draft_admin_only %>,

  emailProtocol: 'SMTP',
  smtp: {
    service             : '',
    host                : '<%= @email_host %>',
    secureConnection    : <%= @email_secure %>,
    port                : <%= @email_port %>,
    auth                : {
      user              : '<%= @email_user %>',
      pass              : '<%= @email_password %>'
    },
    ignoreTLS           : false,
    debug               : false,
    maxConnections      : 5
  },


  // System-wide email notification settings
  // Set as a comma-separated list of email addresses
  notificationsCC  : '<%= @email_cc %>',
  notificationsBCC : '<%= @email_bcc %>',

  ses: {
    // AWSAccessKeyID: 'AWSACCESSKEY',
    // AWSSecretKey: 'AWS/Secret/key',
    // ServiceUrl: 'https://email.us-east-1.amazonaws.com'
  },

  dkimEnabled: false,
  dkim: {
    // domainName: "kreata.ee",
    // keySelector: "dkim",
    // privateKey: fs.readFileSync("private_key.pem"),
    // headerFieldNames: ''
  },

  systemEmail: '<%= @app_system_email %>',

  auth: {
    auth: {
      local : {
        // number of attempts before locking out the user
        passwordAttempts : 5,
        // expire password reset tokens after this many milliseconds
        tokenExpiration  : 60*60*1000
      },
      linkedin : {
        clientId    : '<%= @linkedin_client_id %>',
        clientSecret: '<%= @linkedin_client_secret %>',
        callbackUrl : 'https://<%= @app_host %>/api/auth/callback/linkedin',
        overwrite   : false
      },
      myusa : {
        clientId    : '<%= @myusa_client_id %>',
        clientSecret: '<%= @myusa_client_secret %>',
        callbackUrl : 'https://<%= @app_host %>/api/auth/callback/myusa',
        overwrite   : false
      },
      sspi : {
        contentUrl  : 'http://localhost:1337/api/main/test',
        emailDomain : 'state.gov',
        header      : 'x_remote_user',
        globalPass  : 'AbAbAb12!@',
        // re-authenticate on hard reload after this many milliseconds
        sessionExpiration : 60*60*1000,
        // overwrite existing profile fields
        overwrite   : true,
        enabled     : false
      }
    }
  }

};
